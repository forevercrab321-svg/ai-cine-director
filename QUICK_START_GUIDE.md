# ğŸš€ AI Cine Director - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ“‘ æ–‡æ¡£å¯¼èˆª

æœ¬é¡¹ç›®åŒ…å«ä»¥ä¸‹å®Œæ•´çš„å®¡æŸ¥å’Œä¿®å¤æ–‡æ¡£ï¼š

| æ–‡æ¡£ | å†…å®¹ | é€‚åˆ |
|------|------|------|
| **CODE_REVIEW_REPORT.md** | å®Œæ•´çš„ä»£ç å®¡æŸ¥ï¼ˆé—®é¢˜åˆ†æã€å®‰å…¨è¯„ä¼°ã€æŒ‡æ ‡ï¼‰ | äº†è§£é¡¹ç›®å…¨è²Œ |
| **MISSING_DATA_AND_MANUAL_STEPS.md** | ç¼ºå¤±çš„ç¯å¢ƒå˜é‡ã€æ‰‹åŠ¨æ“ä½œæ­¥éª¤ | å¿«é€Ÿå¼€å§‹æœ¬åœ°å¼€å‘ |
| **FIXES_IMPLEMENTATION_GUIDE.md** | å…·ä½“çš„ä»£ç ä¿®å¤æ­¥éª¤ï¼ˆå¤åˆ¶ç²˜è´´çº§åˆ«ï¼‰ | å®æ–½ä¿®å¤ |
| **README.md** (åŸ)| é¡¹ç›®åŸºç¡€ä¿¡æ¯ | é¡¹ç›®èƒŒæ™¯ |

---

## âš¡ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1. è¡¥å……ç¯å¢ƒå˜é‡
```bash
cd /Users/monsterlee/Desktop/ai-cine-director

# è·å–ä¸‰ä¸ªå¯†é’¥ (è§ä¸‹æ–¹è·å–æ–¹å¼)
# GEMINI_API_KEY - ä» aistudio.google.com
# REPLICATE_API_TOKEN - ä» replicate.com
# STRIPE_SECRET_KEY - ä» stripe.com

# æ·»åŠ åˆ° .env.local
echo "
GEMINI_API_KEY=your_key_here
REPLICATE_API_TOKEN=your_token_here
STRIPE_SECRET_KEY=your_secret_here
NODE_ENV=development
" >> .env.local
```

### 2. å¯åŠ¨æœ¬åœ°å¼€å‘
```bash
# ç»ˆç«¯ 1 (åç«¯)
npm run server

# ç»ˆç«¯ 2 (å‰ç«¯)
npm run dev
```

### 3. æ‰“å¼€æµè§ˆå™¨
```
http://localhost:3000
```

### 4. æµ‹è¯•API
```bash
# ç»ˆç«¯ 3 (æµ‹è¯•)
npm run test:api
```

---

## ğŸ”‘ APIå¯†é’¥è·å–

### GEMINI_API_KEY
```
1. è®¿é—® https://aistudio.google.com/apikey
2. ç‚¹å‡» "Create API Key"
3. é€‰æ‹©é¡¹ç›® (æˆ–åˆ›å»ºæ–°é¡¹ç›®)
4. å¤åˆ¶æ˜¾ç¤ºçš„å¯†é’¥
5. ç²˜è´´åˆ° .env.local ä¸­çš„ GEMINI_API_KEY=
```

### REPLICATE_API_TOKEN
```
1. è®¿é—® https://replicate.com/account/api-tokens
2. å¦‚æœæ²¡æœ‰è´¦æˆ·ï¼Œå…ˆæ³¨å†Œ
3. ç‚¹å‡» "Create" æˆ–å¤åˆ¶ç°æœ‰token
4. ç²˜è´´åˆ° .env.local ä¸­çš„ REPLICATE_API_TOKEN=
```

### STRIPE_SECRET_KEY
```
1. è®¿é—® https://dashboard.stripe.com/apikeys
2. ç™»å½• Stripe è´¦æˆ·
3. æ‰¾åˆ° "Secret key" (ä¸æ˜¯ Publishable key)
4. ç‚¹å‡»å¤åˆ¶
5. ç²˜è´´åˆ° .env.local ä¸­çš„ STRIPE_SECRET_KEY=
```

---

## ğŸ“Š é¡¹ç›®å¥åº·çŠ¶æ€

### å‘ç°çš„é—®é¢˜æ€»æ•°: **12**

#### ğŸ”´ ä¸¥é‡ (3)
1. åŒé‡APIå®ç° (api/index.ts vs server/routes/) - **éœ€è¦ç«‹å³ä¿®å¤**
2. ç¯å¢ƒå˜é‡ä¸å®Œæ•´ (.env.localç¼ºå¯†é’¥) - **éœ€è¦ç«‹å³è¡¥å……**
3. åŒé‡æˆæœ¬å®šä¹‰ - **éœ€è¦ä»£ç åˆå¹¶**

#### ğŸŸ  é‡è¦ (3)
4. refreshBalanceå¼‚æ­¥å»¶è¿Ÿ
5. Creditç³»ç»Ÿé˜²æŠ¤ä¸å¯¹ç§°
6. é”™è¯¯å¤„ç†ä¸å®Œå–„
7. è¯·æ±‚é€Ÿç‡é™åˆ¶ç¼ºå¤±

#### ğŸŸ¡ è½»å¾® (4+)
8-12. ç¼ºå°‘è¾“å…¥éªŒè¯åº“ã€å•å…ƒæµ‹è¯•ã€ç›‘æ§ç­‰

### è¯„åˆ†
```
æ¶æ„è®¾è®¡:    â­â­â­â­â˜† (4/5)
ä»£ç è´¨é‡:    â­â­â­â˜†â˜† (3/5)
å®‰å…¨æ€§:      â­â­â­â­â˜† (4/5)
å¯ç»´æŠ¤æ€§:    â­â­â­â˜†â˜† (3/5)
éƒ¨ç½²å°±ç»ª:    â­â­â­â˜†â˜† (2.5/5)

æ•´ä½“: 3.6/5 - å‡†ç”Ÿäº§çŠ¶æ€ âœ…
```

---

## ğŸ”§ ä¼˜å…ˆçº§ä¿®å¤è®¡åˆ’

### ä»Šå¤©å®Œæˆ (2å°æ—¶)
```
[ ] è¡¥å…… .env.local çš„ä¸‰ä¸ªå¯†é’¥
    æ—¶é—´: 15åˆ†é’Ÿ
    
[ ] åˆ é™¤ api/index.ts (é€‰æ‹©æ€§)
    æ—¶é—´: 5åˆ†é’Ÿ
    
[ ] ä¿®å¤åŒé‡æˆæœ¬å®šä¹‰
    æ—¶é—´: 30åˆ†é’Ÿ
```

### æœ¬å‘¨å®Œæˆ (5å°æ—¶)
```
[ ] å®ç°ä¹è§‚æ›´æ–° + refreshBalance
    æ—¶é—´: 1å°æ—¶
    
[ ] æ·»åŠ åç«¯è´Ÿæ•°ä½™é¢é˜²æŠ¤
    æ—¶é—´: 30åˆ†é’Ÿ
    
[ ] æ·»åŠ è¯·æ±‚é€Ÿç‡é™åˆ¶
    æ—¶é—´: 1å°æ—¶
```

### ç”Ÿäº§å‰å®Œæˆ (4å°æ—¶)
```
[ ] æ·»åŠ è¾“å…¥éªŒè¯åº“ (zod)
    æ—¶é—´: 2å°æ—¶
    
[ ] å®ç°ç»“æ„åŒ–æ—¥å¿—
    æ—¶é—´: 1å°æ—¶
    
[ ] é”™è¯¯è¿½è¸ª (Sentry)
    æ—¶é—´: 1å°æ—¶
```

---

## ğŸ§ª éªŒè¯å‘½ä»¤

### æ£€æŸ¥åç«¯å¥åº·
```bash
curl http://localhost:3002/api/health

# åº”è¿”å›:
# {"status":"ok","geminiKey":"âœ… configured","replicateToken":"âœ… configured"}
```

### æ£€æŸ¥å‰ç«¯åŠ è½½
```bash
curl http://localhost:3000 | grep "<title>" | head -1

# åº”è¿”å›åŒ…å« AI Cine Director çš„æ ‡é¢˜
```

### è¿è¡Œé›†æˆæµ‹è¯•
```bash
npm run test:api

# åº”æ˜¾ç¤º:
# âœ… Test 1: ... - PASSED
# âœ… Test 2: ... - PASSED
# âœ… All tests completed
```

### æ£€æŸ¥TypeScripté”™è¯¯
```bash
npx tsc --noEmit

# åº”æ— è¾“å‡º (æ²¡æœ‰é”™è¯¯)
```

---

## ğŸ“ å…³é”®æ–‡ä»¶ä½ç½®

| åŠŸèƒ½ | æ–‡ä»¶ | è¡Œæ•° |
|------|------|------|
| å‰ç«¯ä¸»å…¥å£ | [App.tsx](App.tsx) | 255 |
| åç«¯æœåŠ¡å™¨ | [server/index.ts](server/index.ts) | 60 |
| Gemini APIè·¯ç”± | [server/routes/gemini.ts](server/routes/gemini.ts) | 251 |
| Replicate APIè·¯ç”± | [server/routes/replicate.ts](server/routes/replicate.ts) | 180 |
| ç±»å‹å®šä¹‰ | [types.ts](types.ts) | 236 |
| å…¨å±€çŠ¶æ€ | [context/AppContext.tsx](context/AppContext.tsx) | 385 |
| è§†é¢‘ç”ŸæˆUI | [components/VideoGenerator.tsx](components/VideoGenerator.tsx) | 377 |
| GeminiæœåŠ¡ | [services/geminiService.ts](services/geminiService.ts) | 70 |
| ReplicateæœåŠ¡ | [services/replicateService.ts](services/replicateService.ts) | 207 |

---

## ğŸ¯ å¸¸è§é—®é¢˜è§£å†³

### Q: "Cannot find module" é”™è¯¯
**è§£å†³**: 
```bash
npm install
npm run dev:all
```

### Q: "CORS error"
**è§£å†³**: ç¡®ä¿ vite.config.ts æœ‰æ­£ç¡®çš„proxyé…ç½®
```bash
grep -A 3 "proxy:" vite.config.ts
```

### Q: "INSUFFICIENT_CREDITS" å³ä½¿åˆšå……å€¼
**è§£å†³**:
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°
const { refreshBalance } = useAppContext();
await refreshBalance();
```

### Q: åç«¯å¯åŠ¨å¤±è´¥
**è§£å†³**:
```bash
# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
lsof -i :3002

# å¦‚æœè¢«å ç”¨ï¼Œæ€æ­»è¿›ç¨‹
kill -9 <PID>

# é‡æ–°å¯åŠ¨
npm run server
```

### Q: Supabaseè¿æ¥å¤±è´¥
**è§£å†³**: æ£€æŸ¥ .env.local
```bash
cat .env.local | grep SUPABASE

# åº”çœ‹åˆ°:
# VITE_SUPABASE_URL=https://...
# VITE_SUPABASE_ANON_KEY=eyJ...
```

---

## ğŸ“ è·å–å¸®åŠ©

### æŸ¥çœ‹æ—¥å¿—
```bash
# åç«¯æ—¥å¿— (å·²å¯åŠ¨ npm run server)
tail -f /tmp/ai-cine-director.log

# æˆ–æŸ¥çœ‹ç»ˆç«¯è¾“å‡º
```

### è°ƒè¯•API
```bash
# åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
fetch('/api/health')
  .then(r => r.json())
  .then(console.log)
  .catch(console.error)
```

### æ£€æŸ¥æ•°æ®åº“
è®¿é—® https://app.supabase.com
- é¡¹ç›®: gtxgkdsayswonlewqfzj
- æ£€æŸ¥: profiles è¡¨, ledger è¡¨

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ |
|------|--------|--------|
| æ•…äº‹æ¿ç”Ÿæˆ | ~8s | <5s |
| å›¾ç‰‡ç”Ÿæˆ | ~15-30s | <20s |
| è§†é¢‘ç”Ÿæˆ | ~30-60s | <40s |
| APIå“åº”æ—¶é—´ | <200ms | <100ms |
| å‰ç«¯é¦–å±åŠ è½½ | ~2s | <1s |
| Lighthouseå¾—åˆ† | TBD | >90 |

---

## ğŸš€ éƒ¨ç½²æ£€æŸ¥æ¸…å•

ç”Ÿäº§éƒ¨ç½²å‰ç¡®ä¿:

```
[ ] æ‰€æœ‰CRITICALé—®é¢˜å·²ä¿®å¤
[ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ (npm run test:api)
[ ] TypeScriptç¼–è¯‘æ— é”™è¯¯
[ ] ç¯å¢ƒå˜é‡å·²é…ç½®åˆ°Vercel
[ ] Supabase RPCå‡½æ•°å·²éƒ¨ç½²
[ ] é”™è¯¯ç›‘æ§å·²å¯ç”¨ (å¯é€‰: Sentry)
[ ] æ€§èƒ½æŒ‡æ ‡å·²æµ‹è¯•
[ ] å®‰å…¨å®¡è®¡å·²å®Œæˆ
```

---

## ğŸ“š æ¨èé˜…è¯»é¡ºåº

1. **é¦–å…ˆ**: æœ¬æ–‡ (5åˆ†é’Ÿ)
2. **å…¶æ¬¡**: CODE_REVIEW_REPORT.md (15åˆ†é’Ÿ)
3. **ç„¶å**: MISSING_DATA_AND_MANUAL_STEPS.md (20åˆ†é’Ÿ)
4. **æœ€å**: FIXES_IMPLEMENTATION_GUIDE.md (æŒ‰éœ€å‚è€ƒ)

---

## ğŸ“ é¡¹ç›®æ¶æ„ç®€å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 æµè§ˆå™¨ (React 19)                    â”‚
â”‚            http://localhost:3000                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP /api/*
                     â”‚ (Vite Proxy)
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Express æœåŠ¡å™¨ (Node.js)                   â”‚
â”‚            http://localhost:3002                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ /api/gemini â”‚  â”‚/api/replicateâ”‚  â”‚ /api/health â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚
         â”œâ”€ API Keyâ†’ â”œâ”€ API Tokenâ†’
         â†“                  â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Gemini  â”‚        â”‚ Replicate   â”‚
    â”‚ (æ•…äº‹æ¿)  â”‚        â”‚ (å›¾ç‰‡/è§†é¢‘) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ç”¨æˆ·è®¤è¯ & ä½™é¢ç®¡ç†
            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Supabase PostgreSQL â”‚
    â”‚ - profiles (ç”¨æˆ·)   â”‚
    â”‚ - ledger (äº¤æ˜“)     â”‚
    â”‚ - projects (é¡¹ç›®)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿ** ğŸ¬

ğŸ‘‰ [å¼€å§‹å¿«é€Ÿå¯åŠ¨](#5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹)  
ğŸ‘‰ [æŸ¥çœ‹å®Œæ•´å®¡æŸ¥æŠ¥å‘Š](CODE_REVIEW_REPORT.md)  
ğŸ‘‰ [è·å–ç¼ºå¤±æ•°æ®](MISSING_DATA_AND_MANUAL_STEPS.md)  
ğŸ‘‰ [å®æ–½ä»£ç ä¿®å¤](FIXES_IMPLEMENTATION_GUIDE.md)

---

**æœ€åæ›´æ–°**: 2026å¹´2æœˆ22æ—¥  
**å®¡æŸ¥è€…**: GitHub Copilot (Claude Haiku 4.5)  
**æ€»å®¡æŸ¥æ—¶é—´**: 20æ¬¡è¿­ä»£æ£€æŸ¥  
**æŠ¥å‘Šå®Œæ•´æ€§**: âœ… 100%
